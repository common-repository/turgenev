!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}({8:function(e,t){var n=wp.i18n.__;document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("turgenev-panel"),t=document.getElementById("turgenev-balance"),r=document.getElementById("turgenev-table"),a=document.getElementById("turgenev-workflow"),o=document.getElementById("turgenev-top-up");window.TGEV={checkRawContent:!0,url:"https://turgenev.ashmanov.com",contentTypeToggle:function(e){var t=e.target.checked;this.checkRawContent=t},convertLabel:function(e){switch(e){case"frequency":e=n("Frequency","turgenev");break;case"style":e=n("Style","turgenev");break;case"keywords":e=n("Keywords","turgenev");break;case"formality":e=n("Formality","turgenev");break;case"readability":e=n("Readability","turgenev")}return e},makeTable:function(e){var t=e.details,a="";if(a+='<div class="form-table-responsive"><table class="form-table">',e.hasOwnProperty("error"))a+="<tr><th>".concat(e.error,"</th></tr>");else{var o=TGEV.convertLabel(e.level);for(var c in a+="<tr><th>".concat(n("Overall risk","turgenev"),"</th><td>").concat(o," <strong>(").concat(e.risk,")</strong></td></tr>\n        <tr><th>").concat(n("Report","turgenev"),'</th><td><a href="').concat(this.url,"/?t=").concat(e.link,'" target="_blank">').concat(n("More","turgenev"),"</a></td></tr>\n        "),t){var l=TGEV.convertLabel(t[c].block),s=t[c].sum,i=t[c].params,u=t[c].link;for(var d in a+='<tr><th class="tg-head">'.concat(l," (").concat(s,')</th><td class="tg-head"><a href="').concat(this.url,"/?t=").concat(u,'" target="_blank">').concat(n("More","turgenev"),"</a></td></tr>"),i){var v=i[d].name,p=i[d].value,y=i[d].score;a+="<tr><th>".concat(v,"</th><td>").concat(p," (<strong>").concat(y,"</strong>)</td></tr>")}}}a+="</table></div>",r.innerHTML=a},checkBalance:function(){var n=new XMLHttpRequest,r="api=balance&key=".concat(turgenev_ajax.api_key);return e.style.opacity="0.5",e.style.cursor="default",e.style.pointerEvents="none",n.open("POST",this.url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onload=function(){if(n.status>=200&&n.status<300){var r=n.response;if(r){var c=JSON.parse(r);t.innerHTML="".concat(c.balance,"&nbsp;&#8381;"),parseFloat(c.balance)<10&&(t.style.color="#ac2929",t.classList.add("turgenev-blink")),parseFloat(c.balance)<=5?(a&&a.remove(),o&&(o.style.display="inline-block")):(a&&(a.style.display="block"),o&&o.remove()),e.style.opacity="1",e.style.cursor="auto",e.style.pointerEvents="auto"}}},n.send(r),"..."},checkContent:function(){var t=new XMLHttpRequest,a=tinymce.activeEditor.getContent(),o=this,c="";if(this.checkRawContent){var l=document.createElement("div");l.innerHTML=a,c=l.textContent||l.innerText||""}else c=a;if(c=c.trim()){var s="api=risk&more=1&key=".concat(turgenev_ajax.api_key,"&text=").concat(encodeURIComponent(c));e.style.opacity="0.5",e.style.cursor="default",e.style.pointerEvents="none",t.open("POST",this.url,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onload=function(){if(t.status>=200&&t.status<300){var n=t.response;if(n){var r=JSON.parse(n);o.makeTable(r),o.checkBalance(),e.style.opacity="1",e.style.cursor="auto",e.style.pointerEvents="auto"}}},t.send(s)}else r.style.marginLeft="0",r.style.marginRight="0",r.innerText=n("Failed to parse content. Add content to the editor or click in the editable area.","turgenev")}},e&&TGEV.checkBalance()}))}});